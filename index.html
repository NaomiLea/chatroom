<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Mirza" rel="stylesheet">
    <!-- <script src="index.js"></script> -->
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">


</head>

<body>
    <div id="chatlog" class="col-sm-9">

        <ul id="messages"></ul>
    </div>
    <div id="online" class="col-sm-3">
        <div id="username"></div>
        <div id="emojis">

            <i class="em em---1" onClick="emoji()"></i>

            <i class="em em--1"></i>
            <i class="em em-smile"></i>
            <i class="em em-worried"></i>
            <i class="em em-punch"></i>
            <i class="em em-unamused"></i>
            <i class="em em-yum"></i>

        </div>
    </div>


    <form class="col-sm-12" action="">
        <div class="controls">
            <input id="type" type="text" />
            <input type="submit" id="submit" />
            <label for="base">Change text color</label>
            <input id="base" type="color" name="base" value="#ffc600">
            <i class="em em-smiley" onClick="emojiBox()"></i>

        </div>

    </form>

    <script>
        var socket = io();
        var user = prompt("What's your name?");

        $('form').submit(function() {
            socket.emit('chat message', $('#type').val());
            $('#type').val('');
            return false;
        });
        socket.on('chat message', function(msg) {
            $('#messages').append($('<li>').text(msg));
        });
        socket.emit("join", user);
        socket.on('user list', function(onlineUsers) {
            $("#username").empty();
            for (var i = 0; i < onlineUsers.length; i++) {
                $("#username").append($("<p>").text(onlineUsers[i]));
            }
        });

        //Changing of color
        const inputs = document.querySelectorAll(".controls input");

        function handleUpdate() {
            const suffix = this.dataset.sizing || "";
            document.documentElement.style.setProperty(`--${this.name}`, this.value + suffix);

        }
        inputs.forEach(input => input.addEventListener("change", handleUpdate));
        inputs.forEach(input => input.addEventListener("mousemove", handleUpdate));

        function emojiBox() {
            var div = document.getElementById('emojis');

            if (div.style.display == 'none') {
                div.style.display = 'block';
            } else {
                div.style.display = 'none';
            }
        };

        function emoji() {
            document.getElementById("messages").createElement = '<i class="em em---1"></i>';

        };
    </script>


</body>


</html>
