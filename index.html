<!DOCTYPE html>
<html>

<head>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Mirza" rel="stylesheet">
    <!-- <script src="index.js"></script> -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.emojipicker.css">
    <script type="text/javascript" src="js/jquery.emojipicker.js"></script>

    <!-- Emoji Data -->
    <link rel="stylesheet" type="text/css" href="css/jquery.emojipicker.a.css">
    <script type="text/javascript" src="js/jquery.emojis.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">

</head>

<body>
    <div id="chatlog" class="col-sm-9">

        <ul id="messages"></ul>
    </div>
    <div id="online" class="col-sm-3">
        <div id="username"></div>
    </div>


    <form class="col-sm-12" action="">
        <div class="controls">

            <div class="field" id="typing">
                <input type="text" id="input-default" class="emojiable-option">
            </div>

            <div id="typing">
                <input type="submit" id="submit" />
                <label for="base">Change text color</label>
                <input id="base" type="color" name="base" value="#ffc600">
            </div>

        </div>

    </form>

    <script>
        //EMOJI CODE
        $(document).ready(function(e) {

            $('#input-default').emojiPicker();


            // keyup event is fired
            $(".emojiable-option").on("keyup", function() {
                //console.log("emoji added, input val() is: " + $(this).val());
            });

        });


        //SOCKET.IO
        var socket = io.connect();


        $('form').submit(function(e) {
            socket.emit('chat message', $('#input-default').val());
            $('#input-default').val('');
            return false;
        });
        socket.on('chat message', function(msg) {
            $('#messages').append($('<li>').text(msg));

        });

        socket.on("connect", function(msg) {
            nickname = prompt("What's your name?");
            socket.emit("join", nickname);
        });


        socket.on('user list', function(user) {
            $("#username").empty();
            for (var i = 0; i < user.length; i++) {
                $("#username").append($("<p>").text(user[i]));
            }
        });



        //Changing of color
        const inputs = document.querySelectorAll(".controls input");

        function handleUpdate() {
            const suffix = this.dataset.sizing || "";
            document.documentElement.style.setProperty(`--${this.name}`, this.value + suffix);

        }
        inputs.forEach(input => input.addEventListener("change", handleUpdate));
        inputs.forEach(input => input.addEventListener("mousemove", handleUpdate));

        function emojiBox() {
            var div = document.getElementById('emojis');

            if (div.style.display == 'none') {
                div.style.display = 'block';
            } else {
                div.style.display = 'none';
            }
        };
    </script>

</body>


</html>
